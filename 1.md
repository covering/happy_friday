# 1. Coding is Writing

这两年在写业务逻辑, java&spring, 终于理解了传说中的业务逻辑的可怕. 简而言之, 代码混乱, 逻辑耦合. 这不是部分程序员的问题, 而是一个行业的现象. 最近, 我做了一些总结和尝试, 抛砖引玉, 希望对业务逻辑的编程, 能有一些改善. 

## Readability Kills
业务逻辑开发和系统开发, 有很大的区别. 因为系统本身, 是一个完整的体系, 所以工程师可以更好的获得完整的理解, 进行完善的设计; 而业务逻辑的开发, 需求是不断变化, 并且大多数时候, 只能有一些侧写, 或者临时的方案. 换句话说: 业务系统中, 属于系统的部分, 优先被工程师解决了, 剩下的都是难以系统化的部分.

因为业务逻辑原生缺少"系统性", 又不断变化, 可能"认真写了一星期, 刚上线就要删掉", 而且还要赶时间, 被deadline不断催, 所以工程师习惯用"不做设计"的方式, 把业务逻辑堆叠在代码中, 一切以快速上线为目的, 怎么方便怎么写. 这种情况不断迭代, 造就了"丑陋并且难以维护"的业务逻辑.

//TODO: 需要一张图

业务逻辑代码长期的混乱, 又让工程师接受了这种糟糕的"培训", 于是情况变得愈发糟糕. 

## Writing Code for Read
这种情况需要改变. 业务不是在写完代码的时候完成的, 在整个代码的生命周期里, 会有很多人去维护这些代码. 所以业务逻辑的代码, 需要更加清晰, **可读性必须要放到第一位**.

同时, 因为业务逻辑的代码, 会跟随需求的变化, 进行各种尝试, 所以不仅要让当下的代码清晰可读, 还要提供一种机制, 使得代码, 在经过起业务需求的捶打之后, 还能保持很好的可读性.

这可能吗? 当然是, 可以的. 更棒的是, 实现这个系统几乎是零成本. 它所需要的, 就是**突破限制的思维方式**. 

接下去, 就一起来打造这个系统吧. 

// TODO: 需要一张图. 一个API, 一个fall through的流程图, 提供拓展点. 

## Pick Ideas from Slides

"你问我, 世界上可读性最好的资料在哪里? 我把答案抛向蓝天落在PPT里."

为什么slides是可读性最好的? 教授讲课用它, 介绍知识; 企业家用它, 寻找VC; 老板用它, 判断谁能升职加薪. 这个世界上最重要的, 知识, 财富, 前途, 都用slides, 为什么? 因为slides的核心, 就是可读性, 把所有的事情, 用简单明了的方式, 呈现出来; slides不好懂, 怎么让读它的人掏钱啊! 那么, 我们是不是可以从slides里, 寻找让代码更好阅读的方式呢? 当然!

**Outlines**
几乎所有的slides, 都会在封面之后, 就给出提纲. 提纲的用处, 自然是概括整个slides. 通过提纲, 读者就可以立刻了解整个讲稿的结构. 我好像连说了几句废话, 然而如果对"业务逻辑"代码有了解, 就知道, 这不是废话, 而是重要的事情讲三遍. 所有的"业务逻辑"代码, 最核心的问题就是, 没人知道它们为什么要这么做, 也不知道会对其他部分造成什么影响. 因为业务逻辑代码, 在一段时间之后, 都不可避免的碎片化.

那么要怎么才能给代码写提纲呢? 文档吗? 当然不是. 代码本身就有非常好的对应提纲的概念: abstract method, interface, function definition. 至于怎么来使用它们, 留到后面再讲.

**Mind Flow**
几乎所有的编程语言, 都会有几种控制流的转换: 分支, 循环, 异常. 请问, slides使用什么样的控制流呢? 
slides什么控制流也不用, 它就是从头到尾的平铺直叙. 哪怕需要回顾前面的内容, 它也是采用把要回顾的内容, 复制到下一页, 而不是翻回去. 为什么? 
所有这些只有一个目的: 让读者, 更顺畅的理解. 不打断读者的思路, 不让读者的思路兜圈. 

想必这里肯定让人迷惑, 如果没有分支, 循环, 异常, 代码怎么写呢? 我们当然不是要消除控制流, 这是不可能的. 需要的是, 最大限度地消除影响阅读的控制流. 

系统设计中, 有什么方案, 可以服务于相同的目的呢? 答案是Work Flow. 明明要消除控制流, 却使用更加专业的工作流吗? 就是这么有趣:

既然不能消除控制流, 就把它清晰地描绘出来.

## The End
当我们切换到阅读代码的角度, 来看待写代码. 似乎一条隐藏的线索渐渐清晰: 写代码, 也是一种写作. 

